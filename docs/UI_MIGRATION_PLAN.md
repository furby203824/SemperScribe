# UI Migration Plan: Naval Letter Formatter Modernization

## 1. Executive Summary
This document outlines the strategy to transition the **Naval Letter Formatter** from its current single-column, dark-themed interface to a modern, three-pane, light-themed productivity suite. The new design prioritizes document structure visibility, ease of editing, and real-time preview, aligning with the prototype developed in `public/landing.html`.

## 2. Phase 1: Discovery & Analysis (Completed)

### 2.1 UI Audit
*   **Current Architecture**: Monolithic `page.tsx` managing complex state (`FormData`, `ParagraphData[]`).
*   **Component Library**: Extensive use of `src/components/ui/` (Shadcn-compatible) and specialized `src/components/letter/` components.
*   **Styling**: Hardcoded dark theme (`#1a1a2e`) in `globals.css` with a custom Tailwind configuration extending Shadcn colors.

### 2.2 Functionality Mapping
| UI Element | Backend/State Logic | Risk Level |
| :--- | :--- | :--- |
| **Header Fields** | `formData` (SSIC, Originator, Subject) | Low |
| **Paragraph Editor** | `paragraphs` state, `ParagraphSection.tsx` | High (Complex drag-drop/validation) |
| **Preview** | `NavalLetterPDF.tsx`, `pdf-generator.ts` | Medium |
| **Save/Load** | `localStorage`, `NLDPFileManager` | Medium |
| **EDMS Integration** | `useEDMSContext`, `edms-service` | High (External dependency) |

### 2.3 Gap Analysis
| Feature | Current Implementation | New Concept (Target) | Action Required |
| :--- | :--- | :--- | :--- |
| **Layout** | Single vertical column | 3-Pane (Nav | Editor | Preview) | Create `ModernLayout.tsx` |
| **Navigation** | Scroll-based | Sidebar Outline (Click-to-scroll) | Implement `DocumentOutline` component |
| **Editor UI** | Basic Textareas | Card-based, visual hierarchy | Refactor `ParagraphSection` |
| **Theme** | Dark Blue (`#1a1a2e`) | Light Slate (`bg-slate-50`) | Update `globals.css` & `tailwind.config` |
| **Preview** | Modal / Bottom Section | Always-visible Right Sidebar | Create `LivePreview` pane |

## 3. Phase 2: Design System (Defined)

### 3.1 Typography
*   **Body**: Inter (`sans-serif`)
*   **Monospace**: JetBrains Mono (for SSIC/Codes)
*   **Headers**: Inter (Bold)

### 3.2 Color Palette (Light Theme)
*   **Background**: `bg-slate-50` (`#f8fafc`)
*   **Surface**: `bg-white` (`#ffffff`)
*   **Primary Action**: `text-blue-600` / `bg-blue-600`
*   **Text Primary**: `text-slate-900`
*   **Text Secondary**: `text-slate-500`
*   **Borders**: `border-slate-200`

## 4. Phase 3: Implementation Strategy

### 4.1 Incremental Rollout
We will build the new UI alongside the old one, using a feature flag or route to switch.
1.  **Step 1**: Create `src/components/layout/ModernAppShell.tsx` (The 3-pane grid).
2.  **Step 2**: Create `src/components/layout/Sidebar.tsx` (Left Pane).
3.  **Step 3**: Create `src/components/layout/LivePreview.tsx` (Right Pane).
4.  **Step 4**: Wrap existing `page.tsx` content into the Center Pane.

### 4.2 State Management
To avoid rewriting `page.tsx` logic immediately, we will pass the existing state and setters down to the new Layout components as props.
*   *Future Optimization*: Move state to `LetterContext`.

## 5. Phase 4: Development Plan (Immediate Next Steps)

1.  **Scaffold Shell**: Create the grid layout component.
2.  **Migrate Sidebar**: Implement the `DocumentTypeSelector` and `DocumentStructure` navigation.
3.  **Update Global Styles**: Allow for the Light Theme override.
4.  **Refactor Editor**: Move the `ParagraphSection` into the center pane and style it as cards.

## 6. Phase 5: Testing & Verification
*   **Regression**: Verify EDMS loading still works.
*   **Visual**: Check responsiveness on smaller screens (Sidebar should collapse).
*   **Functional**: Ensure PDF generation matches the inputs.

---
*Generated by Trae AI Pair Programmer*
